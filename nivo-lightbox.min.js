(function(a,h,p,q){function m(d,c){this.el=d;this.$el=a(this.el);this.options=a.extend({},n,c);this._defaults=n;this._name=k;this.init()}var k="nivoLightbox",n={effect:"fade",theme:"default",keyboardNav:!0,clickOverlayToClose:!0,onInit:function(){},beforeShowLightbox:function(){},afterShowLightbox:function(a){},beforeHideLightbox:function(){},afterHideLightbox:function(){},onPrev:function(a){},onNext:function(a){},errorMessage:"The requested content cannot be loaded. Please try again later."};m.prototype=
{init:function(){var d=this;a("html").hasClass("nivo-lightbox-notouch")||a("html").addClass("nivo-lightbox-notouch");"ontouchstart"in p&&a("html").removeClass("nivo-lightbox-notouch");this.$el.on("click",function(a){a.preventDefault();d.showLightbox()});if(this.options.keyboardNav)a("body").off("keyup").on("keyup",function(c){c=c.keyCode?c.keyCode:c.which;27==c&&d.destructLightbox();37==c&&a(".nivo-lightbox-prev").trigger("click");39==c&&a(".nivo-lightbox-next").trigger("click")});this.options.onInit.call(this)},
showLightbox:function(){var d=this;this.options.beforeShowLightbox.call(this);var c=this.constructLightbox();if(c){var g=c.find(".nivo-lightbox-content");if(g){var b=this.$el;a("body").addClass("nivo-lightbox-body-effect-"+this.options.effect);this.processContent(g,b);if(this.$el.attr("data-lightbox-gallery")){var d=this,f=a('[data-lightbox-gallery="'+this.$el.attr("data-lightbox-gallery")+'"]');a(".nivo-lightbox-nav").show();a(".nivo-lightbox-prev").off("click").on("click",function(c){c.preventDefault();
c=f.index(b);b=f.eq(c-1);a(b).length||(b=f.last());d.processContent(g,b);d.options.onPrev.call(this,[b])});a(".nivo-lightbox-next").off("click").on("click",function(c){c.preventDefault();c=f.index(b);b=f.eq(c+1);a(b).length||(b=f.first());d.processContent(g,b);d.options.onNext.call(this,[b])})}setTimeout(function(){c.addClass("nivo-lightbox-open");d.options.afterShowLightbox.call(this,[c])},1)}}},processContent:function(d,c){var g=this,b=c.attr("href");d.html("").addClass("nivo-lightbox-loading");
this.isHidpi()&&c.attr("data-lightbox-hidpi")&&(b=c.attr("data-lightbox-hidpi"));if(null!=b.match(/\.(jpeg|jpg|gif|png)$/i)){var f=a("<img>",{src:b});f.one("load",function(){var b=a('<div class="nivo-lightbox-image" />');b.append(f);d.html(b).removeClass("nivo-lightbox-loading");b.css({"line-height":a(".nivo-lightbox-content").height()+"px",height:a(".nivo-lightbox-content").height()+"px"});a(h).resize(function(){b.css({"line-height":a(".nivo-lightbox-content").height()+"px",height:a(".nivo-lightbox-content").height()+
"px"})})}).each(function(){this.complete&&a(this).load()});f.error(function(){var b=a('<div class="nivo-lightbox-error"><p>'+g.options.errorMessage+"</p></div>");d.html(b).removeClass("nivo-lightbox-loading")})}else if(video=b.match(/(youtube|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/)){var b="",l="nivo-lightbox-video";"youtube"==video[1]&&(b="http://www.youtube.com/embed/"+video[4],l="nivo-lightbox-youtube");"youtu"==video[1]&&(b="http://www.youtube.com/embed/"+video[3],l="nivo-lightbox-youtube");
"vimeo"==video[1]&&(b="http://player.vimeo.com/video/"+video[3],l="nivo-lightbox-vimeo");b&&(b=a("<iframe>",{src:b,"class":l,frameborder:0,vspace:0,hspace:0,scrolling:"auto"}),d.html(b),b.load(function(){d.removeClass("nivo-lightbox-loading")}))}else if("ajax"==c.attr("data-lightbox-type"))g=this,a.ajax({url:b,cache:!1,success:function(b){var c=a('<div class="nivo-lightbox-ajax" />');c.append(b);d.html(c).removeClass("nivo-lightbox-loading");c.outerHeight()<d.height()&&c.css({position:"relative",
top:"50%","margin-top":-(c.outerHeight()/2)+"px"});a(h).resize(function(){c.outerHeight()<d.height()&&c.css({position:"relative",top:"50%","margin-top":-(c.outerHeight()/2)+"px"})})},error:function(){var b=a('<div class="nivo-lightbox-error"><p>'+g.options.errorMessage+"</p></div>");d.html(b).removeClass("nivo-lightbox-loading")}});else if("#"==b.substring(0,1))if(a(b).length){var e=a('<div class="nivo-lightbox-inline" />');e.append(a(b).clone().show());d.html(e).removeClass("nivo-lightbox-loading");
e.outerHeight()<d.height()&&e.css({position:"relative",top:"50%","margin-top":-(e.outerHeight()/2)+"px"});a(h).resize(function(){e.outerHeight()<d.height()&&e.css({position:"relative",top:"50%","margin-top":-(e.outerHeight()/2)+"px"})})}else e=a('<div class="nivo-lightbox-error"><p>'+g.options.errorMessage+"</p></div>"),d.html(e).removeClass("nivo-lightbox-loading");else b=a("<iframe>",{src:b,"class":"nivo-lightbox-item",frameborder:0,vspace:0,hspace:0,scrolling:"auto"}),d.html(b),b.load(function(){d.removeClass("nivo-lightbox-loading")});
c.attr("title")?(b=a("<span>",{"class":"nivo-lightbox-title"}),b.text(c.attr("title")),a(".nivo-lightbox-title-wrap").html(b)):a(".nivo-lightbox-title-wrap").html("")},constructLightbox:function(){if(a(".nivo-lightbox-overlay").length)return a(".nivo-lightbox-overlay");var d=a("<div>",{"class":"nivo-lightbox-overlay nivo-lightbox-theme-"+this.options.theme+" nivo-lightbox-effect-"+this.options.effect}),c=a("<div>",{"class":"nivo-lightbox-wrap"}),g=a("<div>",{"class":"nivo-lightbox-content"}),b=a('<a href="#" class="nivo-lightbox-nav nivo-lightbox-prev">Previous</a><a href="#" class="nivo-lightbox-nav nivo-lightbox-next">Next</a>'),
f=a('<a href="#" class="nivo-lightbox-close" title="Close">Close</a>'),h=a("<div>",{"class":"nivo-lightbox-title-wrap"});c.append(g);c.append(h);d.append(c);d.append(b);d.append(f);a("body").append(d);var e=this;if(e.options.clickOverlayToClose)d.on("click",function(b){(b.target===this||a(b.target).hasClass("nivo-lightbox-content")||a(b.target).hasClass("nivo-lightbox-image"))&&e.destructLightbox()});f.on("click",function(a){a.preventDefault();e.destructLightbox()});return d},destructLightbox:function(){this.options.beforeHideLightbox.call(this);
a(".nivo-lightbox-overlay").removeClass("nivo-lightbox-open");a(".nivo-lightbox-nav").hide();a("body").removeClass("nivo-lightbox-body-effect-"+this.options.effect);a(".nivo-lightbox-prev").off("click");a(".nivo-lightbox-next").off("click");a(".nivo-lightbox-content").empty();this.options.afterHideLightbox.call(this)},isHidpi:function(){return 1<h.devicePixelRatio||h.matchMedia&&h.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),\t\t\t\t\t\t\t  (min--moz-device-pixel-ratio: 1.5),\t\t\t\t\t\t\t  (-o-min-device-pixel-ratio: 3/2),\t\t\t\t\t\t\t  (min-resolution: 1.5dppx)").matches?
!0:!1}};a.fn[k]=function(d){return this.each(function(){a.data(this,k)||a.data(this,k,new m(this,d))})}})(jQuery,window,document);
